<!-- LINC is an open source shared database and facial recognition
system that allows for collaboration in wildlife monitoring.
Copyright (C) 2016  Wildlifeguardians

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

For more information or to contact visit linclion.org or email tech@linclion.org -->
<div class="modal-header" ng-show="title">
  <button type="button" class="close" ng-click="Close()">&times;</button>
  <h3 class="modal-title" ng-bind-html="title"></h3>
</div>
<div class="modal-body" ng-show="content">
  <div class="Container-Panel-1">
    <div class="line-right Left-Panel">
      <h3 class="text-muted">Refine by</h3>
      <div class="tablist" data-allow-multiple="true" role="tablist" aria-multiselectable="true" bs-collapse>
        <div role="tab">
          <h4>
            <a bs-collapse-toggle ng-click="collapse_cv_name_id()"><i class="pull-right icon icon-select-arrows"></i> Name or ID</a>
          </h4>
        </div>
        <div uib-collapse="isCVNameIdCollapsed">
          <div class="panel-body">
            <input ng-change="change_cv_name_or_id()" type="text" class="form-control" ng-model="cv_name_or_id">
          </div>
        </div>
        <div role="tab">
          <h4 >
            <a bs-collapse-toggle ng-click="collapse_cv_organization()"><i class="pull-right icon icon-select-arrows"></i> Organization</a>
          </h4>
        </div>
        <div uib-collapse="isCVOrgCollapsed">
          <div class="panel-body">
            <label ng-repeat="organization in organizations">
              <input ng-click="change_cv_organizations()" type="checkbox"  ng-model="organization.checked" ng-checked="organization.checked">{{! organization.name}}
            </label>
          </div>
        </div>
        <div role="tab">
          <h4 >
            <a bs-collapse-toggle ng-click="refreshSlider(); collapse_cv_age()"><i class="pull-right icon icon-select-arrows"></i> Age</a>
          </h4>
        </div>
        <div uib-collapse="isCVAgeCollapsed">
          <div class="panel-body">
            <rzslider
              rz-slider-model="LionAge.min"
              rz-slider-high="LionAge.max"
              rz-slider-options="LionAge.options"
              rz-slider-step="1"
              rz-slider-on-change="change_cv_age()"
              rz-slider-tpl-url="rzSliderTpl.html">
            </rzslider>
          </div>
        </div>
        <div role="tab">
          <h4 >
            <a bs-collapse-toggle ng-click="collapse_cv_gender()"><i class="pull-right icon icon-select-arrows"></i> Gender</a>
          </h4>
        </div>
        <div uib-collapse="isCVGenderCollapsed">
          <div class="panel-body">
            <label ng-repeat="gender in genders">
              <input ng-click="change_cv_gender()" type="checkbox"  ng-model="gender.checked" ng-checked="gender.checked">{{! gender.label}}
            </label>
          </div>
        </div>
        <div role="tab" data-placement="auto top" data-trigger="hover" data-animation="am-fade-and-scale" bs-tooltip="title_tooltip">
          <h4>
            <a bs-collapse-toggle ng-click="collapse_cv_features()"><i class="pull-right icon icon-select-arrows"></i>Features</a>
          </h4>
        </div>
        <div uib-collapse="isCVFeaturesCollapsed">
          <div class="panel-body">
            <input ng-change="change_cv_features()" type="text" class="form-control" ng-model="tag_features">
          </div>
        </div>
        <div role="tab">
          <h4>
            <a bs-collapse-toggle ng-click="collapse_cv_location()"><i class="pull-right icon icon-select-arrows"></i>Location</a>
          </h4>
        </div>
        <div uib-collapse="isCVLocationCollapsed">
          <div class="panel-body">
            <form name="form1">
              <div class="form-group control" ng-class="{'has-error': form1.latitude.$dirty && form1.latitude.$error.pattern}">
                <label class="location_label" for="latitude">Latitude: </label>
                <input ng-change="change_cv_location()" class="form-control input-sm" type="text" name="latitude" pattern="^[+-]?[0-9]+([\.|,][0-9]{1,20})?" ng-model="cv_location.latitude" limlatlng="90">
                <div class="error-messages cv-search" ng-messages="form1.latitude.$error" ng-if="form1.latitude.$error.limlatlng || form1.latitude.$error.pattern">
                  <div ng-message="limlatlng">
                    <div class="row">
                      <div class="col-sm-2 error-icon-col">
                        <i class="icon icon-error icon-notification"></i>
                      </div>
                      <div class="col-sm-10 error-msg-col">
                        choose a latitude value between -90 and 90.
                      </div>
                    </div>
                  </div>
                  <div ng-message="pattern">
                    <div class="row">
                      <div class="col-sm-2 error-icon-col">
                        <i class="icon icon-error icon-notification"></i>
                      </div>
                      <div class="col-sm-10 error-msg-col" ng-if="form1.latitude.$error.pattern">
                         this is not a valid latitude.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group control" ng-class="{'has-error': form1.longitude.$dirty && form1.longitude.$error.pattern}">
                <label class="location_label" for="longitude">Longitude: </label>
                <input ng-change="change_cv_location()" class="form-control input-sm" type="text" name="longitude" pattern="^[+-]?[0-9]+([\.|,][0-9]{1,20})?" ng-model="cv_location.longitude" limlatlng="180">
                <div class="error-messages cv-search" ng-messages="form1.longitude.$error" ng-if="form1.longitude.$error.limlatlng || form1.longitude.$error.pattern">
                  <div ng-message="limlatlng">
                    <div class="row">
                      <div class="col-sm-2 error-icon-col">
                        <i class="icon icon-error icon-notification"></i>
                      </div>
                      <div class="col-sm-10 error-msg-col">
                        choose a longitude value between -180 and 180.
                      </div>
                    </div>
                  </div>
                  <div ng-message="pattern">
                    <div class="row">
                      <div class="col-sm-2 error-icon-col">
                        <i class="icon icon-error icon-notification"></i>
                      </div>
                      <div class="col-sm-10 error-msg-col" ng-if="form1.longitude.$error.pattern">
                         this is not a valid longitude.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group control" ng-class="{'has-error': form1.radius.$dirty && form1.radius.$error.pattern}">
                <label class="location_label" for="radius">Radius: </label>
                <input ng-change="change_cv_location()" class="form-control input-sm" type="text" name="radius" pattern="^[+-]?[0-9]+([\.|,][0-9]{1,20})?" ng-model="cv_location.radius">
                <div class="error-messages cv-search" ng-messages="form1.radius.$error" ng-if="form1.radius.$error.pattern">
                  <div ng-message="pattern">
                    <div class="row">
                      <div class="col-sm-2 error-icon-col">
                        <i class="icon icon-error icon-notification"></i>
                      </div>
                      <div class="col-sm-10 error-msg-col" ng-if="form1.radius.$error.pattern">
                         this is not a valid radius.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="form-group" style="padding-left:15px;padding-top:20px;">
        <button type="button" class="btn btn-primary" ng-click="requestCV()"><i class="icon icon-flash"></i>Request CV</button>
      </div>
    </div>
    <div class="Right-Panel">
      <div class="Container-Panel-2">
        <div class="Right-Top-Panel">
          <div class="col-sm-6">
            <h3>{{! viewer_label()}}</h3>
          </div>
        </div>
        <div class="Scroll-Panel">
          <table class="table table-hover">
            <thead>
              <tr>
                <th class="text-center"><a ng-click="order('id')" ng-class="{'order_class': predicate === 'id'}">Id</a>
                  <span class="sortorder" ng-show="predicate === 'id'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">Photo</th>
                <th class="text-center">
                  <a href="" ng-click="order('name')" ng-class="{'order_class': predicate === 'name'}">Name</a>
                  <span class="sortorder" ng-show="predicate === 'name'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('age')" ng-class="{'order_class': predicate === 'age'}">Age</a>
                  <span class="sortorder" ng-show="predicate === 'age'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('primary_image_set_id')" ng-class="{'order_class': predicate === 'primary_image_set_id'}">Imageset Id</a>
                  <span class="sortorder" ng-show="predicate === 'primary_image_set_id'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('organization')" ng-class="{'order_class': predicate === 'organization'}">Organization</a>
                  <span class="sortorder" ng-show="predicate === 'organization'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('gender')" ng-class="{'order_class': predicate === 'gender'}">Gender</a>
                  <span class="sortorder" ng-show="predicate === 'gender'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('features')" ng-class="{'order_class': predicate === 'features'}">Features</a>
                  <span class="sortorder" ng-show="predicate === 'features'" ng-class="{reverse:reverse}"></span>
                </th>
                <th class="text-center">
                  <a href="" ng-click="order('is_verified')" ng-class="{'order_class': predicate === 'is_verified'}">Verified</a>
                  <span class="sortorder" ng-show="predicate === 'is_verified'" ng-class="{reverse:reverse}"></span>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr class="link" ng-repeat="lion in filtered_lions = (lions | orderBy:predicate:reverse | nameid_filter:cv_name_or_id:'primary_image_set_id' | age_filter:LionAge | organization_filter:organizations | features_filter:tag_features | gender_filter:genders | LatLngFilter:cv_location)">
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.id}}</a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">
                    <img ng-src="{{!lion.thumbnail}}" width="40" height="40">
                  </a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.name}}</a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.age}} y/o</a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.primary_image_set_id}}</a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.organization}}</a>
                </td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">{{!lion.gender}}</a>
                </td>
                <td ng-if="lion.features" class="text-center">
                  <a ui-sref="lion({id: lion.id})" data-animation="am-flip-x" placement="top-center" bs-tooltip="lion.features_tooltip"><i class="icon icon-notification"></i></a>
                </td>
                <td ng-if="!lion.features" class="text-center"></td>
                <td class="text-center">
                  <a ui-sref="lion({id: lion.id})" target="_blank">
                    <i ng-if="lion.is_verified" class="icon icon-check"></i>
                    <i ng-if="!lion.is_verified" class="icon icon-cross"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </did>
      </div>
    </div>
  </div>
</div>
<!-- <div class="modal-footer">

</div> -->


<!--

  <div class="col-sm-10 Right-Panel">
    <div class="row">
      <div class="col-sm-6">
        <h3>{{! viewer_label()}}</h3>
      </div>
      <div class="col-sm-6 text-right form-group">
        <button type="button" class="btn btn-primary" ng-click="requestCV()"><i class="icon icon-flash"></i>Request CV</button>
      </div>
    </div>-->
