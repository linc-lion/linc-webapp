function ContextMenu(e,t){t=t||{},this.setMap(e),this.map_=e,this.mapDiv_=e.getDiv(),this.id=t.id,this.classNames_=t.classNames||{},this.menuItems_=t.menuItems||[],this.pixelOffset=t.pixelOffset||new google.maps.Point(10,-5),this.zIndex=t.zIndex||null}ContextMenu.prototype=new google.maps.OverlayView,ContextMenu.prototype.draw=function(){if(this.isVisible_){var e=new google.maps.Size(this.mapDiv_.offsetWidth,this.mapDiv_.offsetHeight),t=new google.maps.Size(this.menu_.offsetWidth,this.menu_.offsetHeight),s=this.getProjection().fromLatLngToDivPixel(this.position_),i=s.x,n=s.y;s.x>e.width-t.width-this.pixelOffset.x?i=i-t.width-this.pixelOffset.x:i+=this.pixelOffset.x,s.y>e.height-t.height-this.pixelOffset.y?n=n-t.height-this.pixelOffset.y:n+=this.pixelOffset.y,this.menu_.style.left=i+"px",this.menu_.style.top=n+"px"}},ContextMenu.prototype.getVisible=function(){return this.isVisible_},ContextMenu.prototype.hide=function(){this.isVisible_&&(this.menu_.style.display="none",this.isVisible_=!1)},ContextMenu.prototype.onAdd=function(){function e(e){var i=document.createElement("div");return i.innerHTML=e.label,this.id&&(s.id=this.id),e.className&&(i.className=e.className||self.classNames_.menuItem),e.id&&(i.id=e.id),i.style.cssText="cursor:pointer; white-space:nowrap",i.onclick=function(){google.maps.event.trigger(t,"menu_item_selected",t.position_,e.eventName,t.source),t.hide()},i}var t=this,s=document.createElement("div");this.classNames_.menu&&(s.className=this.classNames_.menu),s.style.cssText="display:none; position:absolute",null!=this.zIndex&&(s.style.zIndex=this.zIndex);var i,n=function(e){var t=e||window.event;t.stopPropagation&&t.stopPropagation(),null!=t.cancelBubble&&(t.cancelBubble=!0)};s.onclick=n,s.onmouseover=n,s.onmousemove=n,s.onmouseenter=n,s.onmouseleave=n,s.onmouseout=n;for(var o=0,l=this.menuItems_.length;o<l;o++)this.menuItems_[o].label&&this.menuItems_[o].eventName?s.appendChild(e(this.menuItems_[o])):s.appendChild((i=void 0,i=document.createElement("div"),t.classNames_.menuSeparator&&(i.className=t.classNames_.menuSeparator),i));delete this.classNames_,delete this.menuItems_,this.isVisible_=!1,this.menu_=s,this.position_=new google.maps.LatLng(0,0),google.maps.event.addListener(this.map_,"click",function(e){t.hide()}),this.getPanes().floatPane.appendChild(s)},ContextMenu.prototype.onRemove=function(){this.menu_.parentNode.removeChild(this.menu_),delete this.mapDiv_,delete this.menu_,delete this.position_},ContextMenu.prototype.show=function(e,t){this.source=t,this.isVisible_||(this.menu_.style.display="block",this.isVisible_=!0),this.position_=e,this.draw()};